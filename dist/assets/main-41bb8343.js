!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const o of e)if("childList"===o.type)for(const e of o.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e=e=>{const t=Object.create({addItem:function(e){this.items.push(e)},deleteItem:function(e){const t=this.items.indexOf(e);-1!==t&&this.items.splice(t,1)}});return t.title=e,t.items=[],t},t=(t,o,n,c,i,r,s)=>{const l=Object.create({togglePriority:function(){this.priority=!this.priority},toggleComplete:function(){this.complete=!this.complete}});return l.title=t,l.color=void 0===o?"neutral":o,l.dueDate=n,l.priority=c,l.complete=i,l.note=r,l.steps=void 0===s?e("steps"):s,l},o=(e,t)=>{const o=Object.create({toggleComplete:function(){this.complete=!this.complete}});return o.title=e,o.complete=void 0!==t&&t,o},n=(()=>{let c=[];return Object.assign(Object.create(e("Master List")),{setActiveList:e=>c=e,getActiveList:()=>c,prepareForStorage:()=>{const e=n.items.indexOf(c);return{title:n.title,items:n.items.map((e=>({title:e.title,items:e.items.map((e=>({title:e.title,color:e.color,dueDate:e.dueDate,priority:e.priority,complete:e.complete,note:e.note,steps:e.steps.items.map((e=>({title:e.title,complete:e.complete})))})))}))),activeListIndex:e}},reconstructFromStorage:c=>{const i=e(c.title);i.items=c.items.map((n=>{const c=e(n.title);return c.items=n.items.map((n=>{const c=e("steps");return c.items=n.steps.map((e=>o(e.title,e.complete))),t(n.title,n.color,n.dueDate,n.priority,n.complete,n.note,c)})),c})),Object.assign(n,i),n.setActiveList(n.items[c.activeListIndex])}})})();(()=>{d("default");const c=document.querySelector(".overlay"),i=document.querySelector(".active-todo-sidebar"),r=document.querySelector("#new-list-input"),s=document.querySelector("#new-todo-input");function l(e,t){return"Enter"===e.key&&13===e.keyCode&&(""!==t&&(e.preventDefault(),!0))}function a(){const e=n.prepareForStorage(),t=JSON.stringify(e);localStorage.setItem("masterList",t)}function d(t){const o=e(t);n.addItem(o),u(o),m()}function u(e){n.setActiveList(e),p()}function m(){const e=document.querySelector(".list-container");e.innerHTML="",n.items.forEach((t=>{const o=function(e){const t=document.createElement("button");return t.classList.add("list-card"),t.innerHTML=e.title,t.addEventListener("click",(()=>{u(e)})),t}(t);e.appendChild(o)}))}function p(){document.querySelector(".active-list-title").textContent=n.getActiveList().title;const e=document.querySelector(".incomplete-container");e.innerHTML="";const t=document.querySelector(".complete-container");function r(e){const t=document.querySelector("#active-steps-container");t.innerHTML="",e.steps.items.forEach((o=>{const n=function(o){const n=document.createElement("div");n.classList.add("step-card");const c=document.createElement("div");n.appendChild(c),d(c,o),c.addEventListener("click",(t=>{t.stopPropagation(),e.toggleComplete(),d(c,e),a()}));const i=document.createElement("p");n.appendChild(i),i.textContent=o.title;const r=document.createElement("p");return n.appendChild(r),r.innerHTML='<i class="step-delete fa-solid fa-trash"></i>',r.onclick=()=>{!function(e,t,o,n){e.steps.deleteItem(t),a(),n.removeChild(o)}(e,o,n,t)},n}(o);t.appendChild(n)}))}function s(e,t){t.priority?e.innerHTML='<i class="fa-solid fa-star"></i>':e.innerHTML='<i class="fa-regular fa-star"></i>'}function d(e,t){t.complete?e.innerHTML='<i class="complete-task fa-solid fa-circle"><i class="fa-solid fa-check"></i></i>':e.innerHTML='<i class="incomplete-task fa-regular fa-circle"></i>'}t.innerHTML="",n.getActiveList().items.forEach((u=>{const m=function(o){const n=document.createElement("div");n.classList.add("todo-card"),n.setAttribute("data-color",o.color);const c=document.createElement("style");c.innerHTML=`[data-color="${o.color}"]::before { background-image: linear-gradient(to right,${o.color},rgba(0, 0, 0, 0)); }`,n.appendChild(c);const i=document.createElement("div");n.appendChild(i),i.classList.add("check-box"),d(i,o),i.addEventListener("click",(c=>{c.stopPropagation(),o.toggleComplete(),d(i,o),function(o,n){n?(e.removeChild(o),t.appendChild(o)):(t.removeChild(o),e.appendChild(o))}(n,o.complete),a()}));const r=document.createElement("h2");n.appendChild(r),r.innerHTML=o.title;const l=document.createElement("p");n.appendChild(l),l.innerHTML=o.dueDate;const u=document.createElement("div");return n.appendChild(u),s(u,o),u.addEventListener("click",(e=>{e.stopPropagation(),o.togglePriority(),s(u,o),a()})),n}(u);m.addEventListener("click",(()=>{!function(s,d){i.querySelector("#task-title").textContent=s.title,r(s);const u=i.querySelector("#add-step-input");u.value="",u.addEventListener("keydown",(e=>{l(e,u.value)&&(!function(e,t){e.steps.addItem(o(t)),a(),r(e)}(s,u.value),u.value="")}));const m=i.querySelector("#task-due-date");m.textContent=s.dueDate;const p=i.querySelector("#task-date-select");p.value="",p.onchange=()=>{s.dueDate=p.value,m.textContent=s.dueDate,a()};const f=i.querySelector("#task-note");f.value="",void 0!==s.note&&(f.value=s.note);f.onchange=()=>{s.note=f.value,a()};i.querySelector("#task-delete").onclick=()=>{!function(o,c){n.getActiveList().deleteItem(o),a(),o.complete?t.removeChild(c):e.removeChild(c);v()}(s,d)},i.classList.add("active"),c.classList.add("active")}(u,m)})),u.complete?t.appendChild(m):e.appendChild(m)}))}function v(){c.classList.remove("active"),i.classList.remove("active")}c.addEventListener("click",(()=>{v()})),r.addEventListener("keydown",(e=>{if(!l(e,r.value))return;const t=r.value;r.value="",d(t),a()})),s.addEventListener("keydown",(e=>{if(!l(e,s.value))return;const o=s.value;s.value="";const c=document.querySelector(".hidden-date-input"),i=c.value;c.value="";document.getElementById("color-selector").classList.add("no-selection");const r=document.getElementById("color-input"),d="#000000"===r.value?"neutral":r.value;r.value="",function(e,o,c){n.getActiveList().addItem(t(e,o,c)),p()}(o,d,i),a()})),function(){const e=document.getElementById("color-selector"),t=document.getElementById("color-input");t.addEventListener("change",(()=>{console.log("change"),console.log(t.value),e.style.backgroundColor=t.value,e.classList.remove("no-selection")})),document.querySelectorAll(".preset").forEach((o=>{o.style.backgroundColor=o.dataset.color,o.addEventListener("click",(n=>{e.blur(),e.style.backgroundColor=o.dataset.color,e.classList.remove("no-selection"),t.value=n.target.dataset.color}))}))}(),function(){const e=localStorage.getItem("masterList");if(e){const t=JSON.parse(e);n.reconstructFromStorage(t),m(),p()}else console.error("No saved data found in local storage")}()})();
